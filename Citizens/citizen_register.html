<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Citizen Registration</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="/nmc_header_css.css"> -->
  <style>
    body {
      background: #e9f8ec;
      font-family: 'Segoe UI', sans-serif;
    }




*{
  box-sizing: border-box;
}
body {
  margin: 0;
  padding: 0;
}
 .nmc-header {
      background-color: rgb(8, 98, 27);
      padding: 10px 20px;
      border-bottom: 1px solid #f1efef;
    }

    .nmc-logo-img {
      height: 70px;
      width: auto;
    }

    .nmc-title {
      text-align: center;
      margin-top: 5px;
    }

    .nmc-title h2 {
      margin: 0;
      font-size: 30px;
      font-weight: 700;
      color: rgb(238, 236, 236);
      font-family: 'Segoe UI', sans-serif;
      
    }

    .nmc-title h4 {
      margin-top: 10px;
      font-size: 22px;
      color: rgb(238, 236, 236);;
      font-weight: 400;
      font-style: bold;
      font-family: 'Noto Sans Telugu', sans-serif;
    }

    @media (max-width: 576px) {
      .nmc-logo-img {
        height: 50px;
      }

      .nmc-title h2 {
        font-size: 18px;
      }

      .nmc-title h4 {
        font-size: 14px;
      }
    }








     input:focus,
    textarea:focus,
    select:focus {
      outline: none !important;
      border-color: #28a745 !important; /* Change this to any color you like (green here) */
      box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25) !important; /* Optional for smooth glow */
      transition: border-color 0.3s ease, box-shadow 0.3s ease !important;
    }

    .form-container {
      max-width: 900px;
      margin: 60px auto;
      padding: 30px 40px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      border-top: 5px solid rgba(3, 91, 22, 0.879);
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
      font-weight: bold;
      color: rgba(3, 91, 22, 0.879);
    }

    #successMessage {
      text-align: center;
      color: green;
      font-size: 24px;
      font-weight: bold;
      display: none;
      animation: boomIn 1s ease forwards;
      margin-top: 40px;
    }

    @keyframes boomIn {
      0% {
        transform: scale(0.7);
        opacity: 0;
      }
      100% {
        transform: scale(1.1);
        opacity: 1;
      }
    }

    button[type="submit"] {
      width: 100%;
      background-color: rgba(3, 91, 22, 0.879);
      border: none;
      padding: 12px;
      font-size: 18px;
      font-weight: bold;
      color: white;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }

    button[type="submit"]:hover {
      background-color: rgba(3, 91, 22, 1);
    }

    .form-label::after {
      content: " *";
      color: red;
    }

    #showPasswordToggle {
      cursor: pointer;
    }

  </style>
</head>
<body>
  <!--Header-->
  <section class="nmc-logo">
          <div class="container-fluid nmc-header">
            <div class="row align-items-center text-center justify-content-between">

              <!-- Left Logo -->
              <div class="col-3 col-sm-2 ml-3">
                <a href="/index.html"><img src="./images/NMC_logo.png" class="nmc-logo-img" alt="NMC Logo"></a>
              </div>

              <!-- Center Title -->
              <div class="col-6 col-sm-8 nmc-title">
                <h2>Naidupeta Municipal Corporation</h2>
                <h4>నాయుడుపేట నగర పాలక సంస్థ</h4>
              </div>

              <!-- Right Logo -->
              <div class="col-3 col-sm-2 mr-3">
                <img src="./images/AP_govt_logo.jpeg" class="nmc-logo-img" alt="Andhra Pradesh Government Logo">
              </div>

            </div>
          </div>
        </section>

  <!--Registration form-->
  <div class="form-container">
    <div id="registrationForm">
      <h2>Citizen Registration</h2>

      <div id="resultMessage"></div>
      
      <form action="/citizen-register" method="POST" id="citizenForm">
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">First Name</label>
            <input type="text" name="firstName" class="form-control" placeholder="Enter first name" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Last Name</label>
            <input type="text" name="lastName" class="form-control" placeholder="Enter last name" required>
          </div>
        </div>
        
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Mobile Number</label>
            <div class="input-group">
              <span class="input-group-text">+91</span>
              <input type="tel" name="mobile"  id="mobile"  class="form-control"  maxlength="10"  pattern="[0-9]{10}"  placeholder="10-digit number" required>
            </div>
          </div>
          <div class="col-md-6">
            <label class="form-label">Ward</label>
            <select id="ward" name="ward" class="form-select" required>
              <option value="">-- Select Ward --</option>
              <script>
                const select = document.getElementById('ward');
                for (let i = 1; i <= 10; i++) {
                  const option = document.createElement('option');
                  option.value = i;
                  option.textContent = `Ward ${i}`;
                  select.appendChild(option);
                }
              </script>
            </select>
          </div>
        </div>
    

        <div class="row mb-3">
          <div class="col-md-6" >
            <label class="form-label">Create Password</label>
            <input type="password" id="password" class="form-control" name="password" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Re-enter Password</label>
            <input type="password" id="confirmPassword" class="form-control"  name="confirmPassword" required>
          </div>
        </div>
        <small id="passwordStrength" class="form-text mt-1 fw-semibold"></small>

        
        <div class="form-check mb-3">
          <input type="checkbox" class="form-check-input" id="showPasswordToggle">
          <label class="form-check-label" for="showPasswordToggle">Show Password</label>
        </div>



        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" placeholder="example@email.com" required>
          </div>
          <div class="col-md-6">
            <label>Address</label>
            <textarea name="address" class="form-control" placeholder="Enter your address" style="height: 120px;"></textarea>
          </div>
        </div>

        <button type="submit" class="btn btn-success w-100">Register</button>
      </form>
    </div>
  </div>

<br><br>
  

<!--Footer-->
<footer style="background: #33691E; color: white;">
  <div class="container py-4">

    <div class="row">

      <!-- Column 1: Logo + Short Info -->
      <div class="col-md-4">
        <div class="d-flex align-items-center mb-2">
          <img src="./images/NMC_logo.png" alt="NMC Logo" width="40" class="me-2">
          <h5 class="mb-0 ml-3 fw-bold">  Naidupeta Municipality</h5>
        </div>
        <p style="font-size: 15px;">
          A citizen-friendly platform for local services such as complaints, permission requests, and health camp registrations.
        </p>
      </div>

      <!-- Column 2: Quick Links -->
      <div class="col-md-4">
        <h6 class="fw-bold mb-3">Quick Links</h6>
        <ul class="list-unstyled" style="font-size: 15px;">
          <li><a href="/index.html" class="text-white text-decoration-none">Home</a></li>
          <li><a href="#" class="text-white text-decoration-none">Complaint</a></li>
          <li><a href="#" class="text-white text-decoration-none">Permissions</a></li>
          <li><a href="#" class="text-white text-decoration-none">Health Camps</a></li>
          <li><a href="#" class="text-white text-decoration-none">Contact Us</a></li>
        </ul>
      </div>

      <!-- Column 3: Contact Info -->
      <div class="col-md-4">
        <h6 class="fw-bold mb-3">Contact Info</h6>
        <p style="font-size: 15px; line-height: 1.7;">
          Municipality Office,<br>
          Naidupeta, SPSR Nellore, Andhra Pradesh<br>
          Email: <a href="mailto:support@naidupeta.in" class="text-white">support@naidupeta.in</a><br>
          Phone: +91-9876543210
        </p>
      </div>

    </div>

    <!-- Divider Line -->
    <hr style="border-color: rgba(255,255,255,0.2);">

    <!-- Bottom Note -->
    <div class="text-center" style="font-size: 15px;">
      &copy; 2025 Naidupeta Municipality. All rights reserved.
    </div>

  </div>
</footer>



<!--Show Password-->
<script>
  const showPasswordToggle = document.getElementById("showPasswordToggle");
  const passwordField = document.getElementById("password");
  const confirmPasswordField = document.getElementById("confirmPassword");

  showPasswordToggle.addEventListener("change", () => {
    const type = showPasswordToggle.checked ? "text" : "password";
    passwordField.type = type;
    confirmPasswordField.type = type;
  });
</script>

<!--Password Strength-->
<script>
  const passwordInput = document.getElementById("password");
  const strengthText = document.getElementById("passwordStrength");

  passwordInput.addEventListener("input", () => {
    const pwd = passwordInput.value;
    const result = checkStrength(pwd);
    strengthText.innerText = result.label;
    strengthText.style.color = result.color;
  });

  function checkStrength(password) {
    const regexes = {
      uppercase: /[A-Z]/,
      lowercase: /[a-z]/,
      number: /[0-9]/,
      specialChar: /[!@#\$%\^&\*]/,
    };

    let score = 0;

    if (password.length >= 8) score++;
    if (regexes.uppercase.test(password)) score++;
    if (regexes.lowercase.test(password)) score++;
    if (regexes.number.test(password)) score++;
    if (regexes.specialChar.test(password)) score++;

    if (password.length === 0) return { label: '', color: '' };
    if (score <= 2) return { label: 'Weak Password', color: 'red' };
    if (score === 3 || score === 4) return { label: 'Medium Strength', color: 'orange' };
    if (score === 5) return { label: 'Strong Password', color: 'green' };
  }
</script>


<script>
  const form = document.getElementById("citizenForm");
  const resultDiv = document.getElementById("resultMessage");

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    // Password match check
    const password = data.password.trim();
    const confirmPassword = data.confirmPassword.trim();
    if (password !== confirmPassword) {
      resultDiv.innerHTML = `
        <div class="alert alert-danger text-center">❌ Passwords do not match</div>`;
      return;
    }

    // Mobile number validation (10 digits only)
    if (!/^[0-9]{10}$/.test(data.mobile.trim())) {
      resultDiv.innerHTML = `
        <div class="alert alert-danger text-center">❌ Enter a valid 10-digit mobile number</div>`;
      return;
    }

    try {
      const res = await fetch("/citizen-register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data),
      });

      const result = await res.json();

      if (res.ok) {
        form.style.display = "none";
        resultDiv.innerHTML = `
          <div class="text-center mt-5">
            <div class="alert alert-success shadow">
              <h4 class="mb-3">${result.message}</h4>
              <a href="citizen_login.html" class="btn btn-success">Login Now</a>
            </div>
          </div>`;
      } else {
        resultDiv.innerHTML = `
          <div class="alert alert-danger text-center">❌ ${result.message}</div>`;
      }
    } catch (err) {
      resultDiv.innerHTML = `
        <div class="alert alert-danger text-center">❌ Server error. Please try again.</div>`;
    }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


</body>
</html>
